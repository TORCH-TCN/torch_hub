{% extends "base.html" %} {% block title %}Home{% endblock %} {% block content
%}

<div x-data="collections" class="page-container">
  <div class="page-container-header">
    <div class="left">
      <h5 class="mb-0">All Collections</h5>
    </div>
    <div class="right searchbar">
      <input class="search-input" type="text" placeholder="Search" x-model="search" @keyup="searchCollection()" />
      <button x-on:click="searchCollection()">
        <i class="fa fa-search" style="font-size: 18px"> </i>
      </button>
    </div>
  </div>
  <div class="main-container">
    <div class="main-container-header">
      <div class="left">
        <p class="xsmall">All</p>
      </div>
    </div>
    <div class="main-container-body p-4">
      <div class="row-collection">
        <!-- Modal -->
        <div>
          <button @click="openModal()">
            <div>
              <div class="add-collection">
                <img src="../static/images/plus_icon.svg" alt="Plus icon" />
                <p>New collection</p>
              </div>
            </div>
          </button>
          <template x-teleport="body">
            
            <div x-show="open" class="modal fade show" >
              <div class="modal-dialog">
                
                <div x-show="open" x-transition class="modal-content" @mousedown.outside="open = false">
                  
                  <div class="modal-header">
                    <h5 class="modal-title">New Collection</h5>
                    <button @click="open = false" class="btn-close">
                      <img src="../static/images/close_icon.svg" />
                    </button>
                  </div>

                  <div class="p-4">
                    <div class="form-group">
                      <label for="collection" class="mr-2">Name</label>
                      <input
                        placeholder=""
                        type="text"
                        x-model="formData.name"
                        class="form-control"
                      />
                    </div>
                    <div class="form-group">
                      <label for="code" class="mr-2">Code</label>
                      <input
                        placeholder=""
                        type="text"
                        x-model="formData.code"
                        class="form-control"
                      />
                    </div>

                    <div class="modal-footer">
                      <button @click="submitData" class="btn btn-primary btn-block">
                        Add Collection
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </template>
          <div class="modal-backdrop fade show" x-show="open"></div>
        </div>

        <template x-for="c in filteredCollections">
          <div
            class="collection-card"
            :alt="c.name"
            x-on:click="openPage(c.code)"
          >
            <div x-data="{ open: false }" class="menu-dropdown">
              <button @click="open = ! open" class="menu-dropbtn" @click.stop>
                <img src="../static/images/list.png" alt="menu" />
              </button>
              <div x-show="open" @click.outside="open = false" class="menu-dropdown-content" @click.stop>
                <p @click="deleteCollection(c.id)" class="xsmall">Delete</p>
              </div>
            </div>

            <img :src="c.cardimg" alt="" />
            <div class="card-body">
              <h5 x-text="c.name"></h5>
              <p x-text="c.code"></p>
            </div>
          </div>
        </template>
      </div>
    </div>
  </div>
</div>

{% endblock %}
