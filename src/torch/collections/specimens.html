{% extends "base.html" %} {% block title %}Specimens{% endblock %} {% block
content %}

<div class="page-container">
  <h5 class="mb-4">{{collection.name}}</h5>

  <div class="main-container" x-data="specimens({{collection.id}})">
    <div class="main-container-header">
      <div class="left">
        <p class="xsmall">All / {{collection.code}}</p>
      </div>
      <div class="right">
        <div class="list-sort">
          <p class="xsmall">View list</p>
          <img
            src="../static//images/down-filled-triangular-arrow.png"
            alt="Down arrow"
          />
        </div>
        <div class="list-sort">
          <p class="xsmall">Sort</p>
          <img
            src="../static//images/down-filled-triangular-arrow.png"
            alt="Down arrow"
          />
        </div>
      </div>
    </div>
    <div class="main-container-body p-4">
      <div class="row">
        <!-- <div>
                  <div class="add-collection">
                      <img src="../static//images/plus.png" alt="Plus icon" >
                      <p>New specimen</p>
                  </div>
              </div> -->
  
        <!-- Modal -->
        <div>
          <button @click="open=true">
            <div>
              <div class="add-collection">
                <img src="../static//images/plus.png" alt="Plus icon" />
                <p>New specimen</p>
              </div>
            </div>
          </button>
          <template x-teleport="body">
            <!-- Backdrop -->
            <div x-show="open" class="modal fade show">
              <div class="modal-dialog">
                <!-- Dialog -->
                <div x-show="open" x-transition class="modal-content">
                  <!-- mousedown.outside="open = false" -->
                  <!-- Modal Title -->
                  <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button @click="open = false" class="btn-close">X</button>
                  </div>
  
                  <!-- Modal Body -->
                  <div class="p-4">
  
                    <div class="form-group" x-data="imageData()">
                      <div x-show="previewUrl == ''">
                          <div id="dropbox" class="mb-4">
                              
                          
                          <p class="text-center uppercase text-bold">
                            <label for="thumbnail" class="cursor-pointer">
                              Click to upload or drag and drop<br>
                              SVG, PNG, JPG or GIF
                            </label>
                            <input
                              type="file"
                              name="thumbnail"
                              id="thumbnail"
                              class="hidden"
                              @change="updatePreview()"
                            />
                          </p>
                      </div>
                        </div>
                        <div x-show="previewUrl !== ''">
                          <img :src="previewUrl" alt="" class="rounded" />
                          <div class="">
                            <button type="button" class="" @click="clearPreview()">
                              change
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
  
                    <div class="modal-footer">
                      <button @click="submitData">Add Specimen</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </template>
          <div class="modal-backdrop fade show" x-show="open"></div>
        </div>
  
        <template x-for="s in specimens">
          <div>
            <div
              class="collection-card"
              :alt="s.name"
              x-on:click="openPage(s.id)"
            >
              <img
                :src="s.upload_path"
                :alt="s.name"
                x-show="s.flow_run_state != 'failed'"
              />
              <img
                src="../static/images/error.png"
                :alt="s.name"
                x-show="s.flow_run_state == 'failed'"
              />
              <div class="card-body">
                <h5 x-text="s.name"></h5>
                <p
                  x-text="s.create_date"
                  x-show="!s.progress && s.flow_run_state != 'failed'"
                ></p>
                <div
                  class="progress"
                  x-show="s.progress && s.flow_run_state != 'failed'"
                >
                  <div
                    class="progress-bar bg-success"
                    role="progressbar"
                    :style="s.style"
                    :aria-valuenow="s.progress"
                    aria-valuemin="0"
                    aria-valuemax="100"
                  ></div>
                  <!-- <div class="progress-bar bg-danger" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div>
                                  <div class="progress-bar bg-warning" role="progressbar" style="width: 20%" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100"></div> -->
                </div>
                <p class="text-danger" x-show="s.flow_run_state == 'failed'">
                  Error
                </p>
              </div>
            </div>
          </div>
        </template>
      </div>
  </div>
  
</div>



{% endblock %}
